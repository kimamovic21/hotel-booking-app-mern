Hotel Booking App - Mern Stack


Backend setup

-open link: https://expressjs.com
-create .gitignore file
-type command: mkdir backend
-type command: cd backend
-type command: npm init
-type command: npm i express cors dotenv mongodb mongoose chalk
-type command: npm i @types/node @types/express @types/cors ts-node typescript tsx --save-dev
-type command: npx tsx --init
-in package.json file add command dev
-create folder src and index.ts file
-create .env file and variable PORT
-create .env.example file
-in index.ts file add basic Express setup
-type command: npm run dev
-open route: http://localhost:3000/api/v1/test


Frontend setup

-open link: https://vite.dev
-type command: mkdir frontend
-type command: cd frontend
-type command: npm create vite@latest .
-type command: npm run dev
-open route: http://localhost:5173


MongoDB setup

-open link: https://www.mongodb.com/products/platform/atlas-database
-create MongoDB database
-in .env file create variable MONGODB_CONNECTION_STRING
-in folder src create folder database and connect.ts file
-in connect.ts file create and export async function connectDB()
-in index.ts file import and invoke function connectDB()


Tailwind CSS setup

-open link: https://tailwindcss.com/docs/installation/using-vite
-delete App.css file
-type command: npm i tailwindcss @tailwindcss/vite
-update vite.config.ts file
-in index.css file add directive import @tailwindcss
-update component App.tsx
-open route: http://localhost:5173


Adding layout

-in folder public add app logo
-create folder layouts and component Layout.tsx
-create folders components, shared and component Header.tsx
-in component Layout.tsx import component Header
-open link: https://reactrouter.com/
-type command: npm i react-router-dom
-in component Header.tsx import component Link
-in tsx create HTML elements with Tailwind CSS classes
-update eslint.config.js file
-add basic router setup in component App.tsx
-create components Hero.tsx and Footer
-in component Layout.tsx import components Hero and Footer
-open route: http://localhost:5173
-open route: http://localhost:5173/search


User registration API

-in folder src create folder models and user.ts file
-create folder routes and users.route.ts file
-create folder controllers and users.controller.ts file
-in users.controller.ts file create and export async function registerUser()
-in users.route.ts file import function registerUser
-invoke function router.post() for function registerUser
-type command: npm i bcryptjs jsonwebtoken
-type command: npm i @types/bcryptjs @types/jsonwebtoken --save-dev
-in .env file create variables JWT_SECRET_KEY and NODE_ENV
-type command: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
-in index.ts file import variable userRoutes from users.route.ts file
-type command: npm i express-validator
-create folder validators and userValidators.ts file
-in userValidators.ts file create and export variable array const registerUserValidator 
-in users.route.ts file import array registerUserValidator
-invoke function app.use() for variable userRoutes
-open Postman and test endpoint {{BASE_URL}}/api/v1/auth/register with POST method
-test endpoint with correct and wrong data
-open MongoDB to see saved user


User login API

-in userValidators.ts file create and export variable array const loginUserValidator
-create auth.controller.ts file
-in auth.controller.ts file create and export async function loginUser()
-create auth.route.ts file
-in auth.route.ts file import function loginUser
-invoke function router.post() for function loginUser
-in index.ts file import variable authRoutes
-invoke function app.use() for variable authRoutes
-open Postman and test endpoint {{BASE_URL}}/api/v1/auth/login with POST method
-test endpoint with correct and wrong data


Folder structure update

-rename file userValidators.ts to authValidators.ts
-remove files users.controller.ts and users.route.ts
-update files auth.controller.ts, auth.route.ts and index.ts


User registration form

-in folder src create folder pages and component RegisterPage
-in component App.tsx import component RegisterPage
-in tsx add component Route for component RegisterPage
-type command: npm i react-hook-form
-in component RegisterPage.tsx import and invoke function useForm()
-in tsx create HTML elements with Tailwind CSS classes
-add validation logic for register component
-create folder types and registerFormData.ts file
-in registerFormData.ts file create and export type RegisterFormData
-in component RegisterPage.tsx import type RegisterFormData
-create folder api and api-client.ts file
-in api-click.ts file import type RegisterFormData
-create and export async function registerUser
-create files .env.local and .env.local.example
-in .env.local file create variable VITE_API_BASE_URL
-type command: npm i react-query --legacy-peer-deps
-in component RegisterPage.ts import and invoke function useMutation()
-in component main.tsx import function QueryClient and component QueryClientProvider from package react-query
-create variable const queryClient
-in tsx add add component QueryClientProvider with prop client
-open route: http://localhost:5173/register
-add user information and click button Create Account
-open MongoDB to see saved user
-update tsconfig files


App Context & Toast notifications

-in folder types create files appContext.ts and toastMessage.ts
-create and export types
-in folder src create folder contexts and component AppContext.tsx
-in component AppContext.tsx add logic for toast context state
-in component main.tsx import component AppContextProvider
-in component RegisterPage.tsx import and invoke function useAppContext()
-in folder shared create component Toast.tsx
-in component AppContext.tsx import component Toast
-in component RegisterPage.tsx import and invoke function useNavigate()
-open route: http://localhost:5173/register
-add user information and click button Create Account
-open MongoDB to see saved user


Checking user login state

-in api-client.ts file update function registerUser()
-in .env file create variable FRONTEND_URL
-type command: npm i cookie-parser
-type command: npm i @types/cookie-parser --save-dev
-in index.ts file update function cors()
-invoke function app.use( cookieParser())
-in auth.controller.ts create and export async function validateToken()
-create folder middlewares and auth.middleware.ts file
-in auth.middleware.ts file create and export async function verifyToken()
-in auth.route.ts file import functions verifyToken and validateToken
-invoke function router.get() for route '/validate-token'
-in folder frontend, in folder types update appContext.ts file
-in api-client.ts file create and export async function validateToken()
-in component AppContext.tsx import function validateToken
-import and invoke function useQuery()
-in tsx add to component AppContext.Provider update prop value
-in component Header.tsx import and invoke function useAppContext()
-in tsx add ternary condition for variable isLoggedIn
-open route: http://localhost:5173/register
-add user information and click button Create Account
-open MongoDB to see saved user
-open cookies settings in web browser
-remove cookie and refresh page


Sign-in & sign-out

-in folder types create signInFormData.ts
-in signInFormData.ts file create and export type SignInFormData
-in folder pages create component SignInPage.tsx
-in component SignInPage.tsx import type SignInFormData
-import and invoke function useForm()
-in tsx create HTML elements with Tailwind CSS classes
-add logic for login validation
-in component App.tsx import component SignInPage
-in tsx add component Route for component SignInPage
-in api-client.ts file import type SignInFormData
-create and export async function signInUser()
-in component SignInPage.tsx import and invoke function useMutation()
-import function signInUser
-import and invoke functions useAppContext() and useNavigate()
-open route: http://localhost:5173/sign-in
-add user information and click button Login
-remove cookie and refresh page
-in auth.controller.ts file create and export async function logoutUser()
-in auth.route.ts file import function logoutUser
-invoke function router.post() for route '/logout'
-in api-client.ts file create and export async function signOutUser()
-in folder shared create component SignOutButton.tsx
-in component SignOutButton.tsx add logic for logout user
-in component Header.tsx import component SignOutButton
-update
-in components RegisterPage.tsx and SignInPage.tsx import function useQueryClient()
-open route: http://localhost:5173 and click button Sign Out


Automated tests & setup test database

-create new e2e test database
-in folder backend create files .env.e2e and .env.e2e.example
-open link: https://www.npmjs.com/package/cross-env
-type command: npm i cross-env
-in package.json file add command: e2e
-update connect.ts file
-type command: npm run e2e 


Auth tests - Login & Register

-install VS CODE extension Playwright test
-open link: https://playwright.dev
-type command: mkdir e2e
-type command: cd e2e
-type command: npm init playwright@latest
-in folder tests create auth.spec.ts file
-in auth.spec.ts file import functions test and expect from package @playwright/test
-create variable const UI_URL 
-invoke function test() for allowing the user to sign in
-type command: cd backend
-type command: npm run e2e
-create test user in MongoDB test database
-open setting Test explorer and click button Run Test
-invoke function test() for allowing the user to register
-open setting Test explorer and click button Run Test


Deployment build scripts & Render deployment

-in folder backend, in package.json file add commands build and start
-type command: npm i fix-esm-import-path --save-dev
-update files package.json and tsconfig.json
-in index.ts file invoke function app.use(express.static())
-type command: npm run build
-type command: npm start
-in folder frontend type command: npm run build
-open route: http://localhost:3000
-open link: https://render.com and deploy your projects frontend and backend
-in option settings add your variables from .env files
-in production MongoDB database update Render IP addresses


Cloudinary setup

-downgrade react version from 19 to 
-open link: https://cloudinary.com
-in files .env and .env.e2e create variables CLOUDINARY_CLOUD_NAME, CLOUDINARY_API_KEY and CLOUDINARY_API_SECRET
-open link: https://www.npmjs.com/package/cloudinary
-type command: npm i cloudinary
-in index.ts file import object cloudinary